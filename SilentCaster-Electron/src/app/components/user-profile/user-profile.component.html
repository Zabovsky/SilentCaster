<div class="user-profile-overlay" (click)="onClose()" *ngIf="userInfo">
  <div class="user-profile-dialog" (click)="$event.stopPropagation()">
    <div class="profile-header">
      <div class="profile-info">
        <h2 [style.color]="userInfo.userColor">{{ userInfo.username }}</h2>
        <div class="user-badges">
          <span class="badge broadcaster" *ngIf="userInfo.isBroadcaster">üëë –°—Ç—Ä–∏–º–µ—Ä</span>
          <span class="badge moderator" *ngIf="userInfo.isModerator">üõ°Ô∏è –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä</span>
          <span class="badge vip" *ngIf="userInfo.isVip">üíé VIP</span>
          <span class="badge subscriber" *ngIf="userInfo.isSubscriber">‚≠ê –ü–æ–¥–ø–∏—Å—á–∏–∫</span>
          <span class="badge follower" *ngIf="userInfo.isFollower">üë• –§–æ–ª–ª–æ–≤–µ—Ä</span>
          <span class="badge prime" *ngIf="userInfo.isPrime">üí≥ Prime</span>
        </div>
      </div>
      <button class="close-btn" (click)="onClose()">‚úï</button>
    </div>

    <div class="profile-stats">
      <div class="stat-item">
        <span class="stat-label">–°–æ–æ–±—â–µ–Ω–∏–π —Å–µ–≥–æ–¥–Ω—è:</span>
        <span class="stat-value">{{ userInfo.totalMessages }}</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">–ù–∞—Ä—É—à–µ–Ω–∏–π:</span>
        <span class="stat-value">{{ userInfo.violations }}</span>
      </div>
      <div class="stat-item" *ngIf="userInfo.followDate">
        <span class="stat-label">–§–æ–ª–ª–æ–≤–µ—Ä —Å:</span>
        <span class="stat-value">{{ userInfo.followDate | date:'dd.MM.yyyy' }}</span>
      </div>
      <div class="stat-item" *ngIf="userInfo.accountCreated">
        <span class="stat-label">–ê–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞–Ω:</span>
        <span class="stat-value">{{ userInfo.accountCreated | date:'dd.MM.yyyy' }}</span>
      </div>
    </div>

    <div class="profile-actions">
      <button class="action-btn twitch-profile" (click)="openTwitchProfile()" title="–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –Ω–∞ Twitch">
        <span class="btn-icon">üì∫</span>
        <span class="btn-text">–ü—Ä–æ—Ñ–∏–ª—å –Ω–∞ Twitch</span>
      </button>
      <button class="action-btn subscriptions" (click)="openSubscriptionsViewer()" title="–ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–¥–ø–∏—Å–æ–∫">
        <span class="btn-icon">üë•</span>
        <span class="btn-text">–ü–æ–¥–ø–∏—Å–∫–∏</span>
      </button>
    </div>

    <div class="profile-messages">
      <h3>–°–æ–æ–±—â–µ–Ω–∏—è —Å–µ–≥–æ–¥–Ω—è ({{ userMessages.length }})</h3>
      <div class="messages-list">
        <div class="message-item" *ngFor="let msg of userMessages">
          <span class="msg-time">{{ msg.timestamp | date:'HH:mm:ss' }}</span>
          <span class="msg-text">{{ msg.message }}</span>
          <span class="msg-violation" *ngIf="msg.violation?.hasViolation">‚ö†Ô∏è</span>
        </div>
      </div>
    </div>
  </div>
</div>

